Based on the files you uploaded, NO, the dashboard will not show worker activity yet because your app.py is missing the status endpoint.

The generated_backend/app.py file in your latest upload only contains the process_po logic. It is missing the /api/status endpoint that the dashboard tries to call. Without this, your dashboard will likely show "Offline" or empty data (error 404).

To fix this and see the "Busy/Idle" status of your workers, you must update generated_backend/app.py to include the status logic.

Step 1: Update generated_backend/app.py
Replace the entire content of your app.py with this code. It combines your Smart Routing with the Worker Monitoring logic.

Python

from flask import Flask, request, jsonify
from redis import Redis
from rq import Queue, Worker
import os
import logging

# Configure logging
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

app = Flask(__name__)

# 1. SECURITY: Enforce API Key
API_KEY = os.getenv('API_KEY')
if not API_KEY:
    # Fallback for safety if env var is missing (optional, but good for stability)
    API_KEY = 'q#*3VyUK6&ih63xZ' 

# Redis connection
redis_conn = Redis(
    host=os.getenv('REDIS_HOST', 'localhost'),
    port=int(os.getenv('REDIS_PORT', 6379)),
    password=os.getenv('REDIS_PASSWORD', None)
)

# Define Queues
q_high = Queue('high', connection=redis_conn)
q_default = Queue('default', connection=redis_conn)
q_low = Queue('low', connection=redis_conn)
q_long = Queue('long_docs', connection=redis_conn)

LONG_DOC_THRESHOLD = 20000

@app.route('/api/status', methods=['GET'])
def get_status():
    """
    Returns the health, queue depths, and ACTIVE WORKER details.
    """
    client_key = request.headers.get('X-API-Key')
    if client_key != API_KEY:
        return jsonify({'error': 'Unauthorized'}), 401

    try:
        # 1. Fetch Logs
        raw_logs = redis_conn.lrange("monitor_logs", 0, 49)
        logs = [log.decode('utf-8') for log in raw_logs]
        
        # 2. Calculate Depths
        total_depth = len(q_high) + len(q_default) + len(q_low) + len(q_long)

        # 3. Fetch REAL Worker Stats (This is the missing piece!)
        workers = Worker.all(connection=redis_conn)
        worker_list = []
        for w in workers:
            # Get the specific job ID if busy
            current_job = w.get_current_job_id()
            
            worker_list.append({
                "name": w.name,  # e.g. "worker.1234"
                "state": w.state, # "busy" or "idle"
                "queues": w.queue_names(), # e.g. ["high", "default"]
                "current_job": current_job or "Waiting..."
            })

        return jsonify({
            "status": "online",
            "queue_depth": total_depth,
            "queues": {
                "high": len(q_high),
                "default": len(q_default),
                "low": len(q_low),
                "long_docs": len(q_long)
            },
            "active_workers": len(workers),
            "worker_details": worker_list, # <--- The dashboard needs this
            "logs": logs
        })
    except Exception as e:
        logger.error(f"Status Error: {e}")
        return jsonify({"error": str(e)}), 500

@app.route('/api/process_po', methods=['POST'])
def process_po():
    client_key = request.headers.get('X-API-Key')
    if client_key != API_KEY:
        return jsonify({'error': 'Unauthorized'}), 401

    try:
        data = request.get_json()
        
        required_fields = ['record_id', 'po_text', 'target_table_id', 'target_field_ids', 'prompt_json']
        if any(f not in data for f in required_fields):
            return jsonify({'error': 'Missing fields'}), 400

        # Routing Logic
        table_id = data.get('target_table_id', '')
        text_len = len(data.get('po_text', '') or "")
        
        selected_queue = q_default
        queue_name = "default"

        if text_len > LONG_DOC_THRESHOLD:
            selected_queue = q_long
            queue_name = "long_docs"
        else:
            if table_id == 'brbf729zp':
                selected_queue = q_high
                queue_name = "high"
            elif table_id == 'bpcdfksyx':
                selected_queue = q_low
                queue_name = "low"
            else:
                selected_queue = q_default
                queue_name = "default"

        from worker import process_po_job
        job = selected_queue.enqueue(
            process_po_job,
            args=(data,),
            job_timeout='60m'
        )
        
        logger.info(f"Enqueued record {data['record_id']} to {queue_name}")
        
        return jsonify({
            'status': 'queued',
            'queue': queue_name,
            'job_id': job.get_id(),
            'message': f'Record {data["record_id"]} added to {queue_name} queue'
        }), 202
        
    except Exception as e:
        return jsonify({'error': str(e)}), 500

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
Step 2: Deploy & Verify
Push this code to GitHub.

Wait for the deployment to finish.

Refresh your dashboard.

Once deployed:

You will see a new table "Worker Fleet".

It will list 2 workers.

When you submit a request, the State will change from IDLE to BUSY.

The Current Job column will show the Record ID being processed.